webpackJsonp([1],[,,,,,,,,,,,,,function(t,o,e){"use strict";var s=e(47),a=e.n(s),n=e(48),i=e.n(n),r=e(21),c=e.n(r),l="AIzaSyAldQuUz-EqT0xCqvyG3Gir9sv9L_eg9xE",u="https://www.googleapis.com/books/v1/volumes",v=function(){function t(){a()(this,t)}return i()(t,[{key:"formatQuery",value:function(t){return t.split(" ").map(function(t){return encodeURIComponent(t)}).join("+")}},{key:"parseParamsObjToURL",value:function(t){var o="";for(var e in t)t.hasOwnProperty(e)&&(o+=e+"="+t[e]+"&");return o}},{key:"searchBooks",value:function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e={q:this.formatQuery(t),printType:"books",apiKey:l,maxResults:15,startIndex:o};return c.a.get(u+"?"+this.parseParamsObjToURL(e))}},{key:"getBook",value:function(t){return c.a.get(u+"/"+t+"?apiKey="+l)}}]),t}();o.a=new v},,,,,function(t,o){},function(t,o,e){e(66);var s=e(1)(e(40),e(78),null,null);t.exports=s.exports},,,,,,,,,,,,,,,,,,,,function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var s=e(20),a=e(18),n=(e.n(a),e(19)),i=e.n(n);s.a.config.productionTip=!1,new s.a({el:"#app",template:"<App/>",components:{App:i.a}})},function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var s=e(45),a=e.n(s),n=e(72),i=e.n(n),r=e(70),c=e.n(r),l=e(73),u=e.n(l),v=e(71),f=e.n(v),d=e(13);o.default={name:"app",components:{favbar:i.a,book:c.a,loader:u.a,bookModal:f.a},data:function(){return{query:"",searchedQuery:"",currentPage:0,totalItems:0,itemsPerPage:15,loading:!1,favorites:JSON.parse(localStorage.getItem("rd-books-favs")||"[]"),books:[],modalInfo:{active:!1,bookId:""}}},computed:{totalPages:function(){return Math.ceil(this.totalItems/this.itemsPerPage)},booksIsEmpty:function(){return!this.books||!this.books.length}},methods:{openBookModal:function(t){this.modalInfo={active:!0,bookId:t}},getBooks:function(){var t=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1];this.books=[],this.currentPage=o,this.searchedQuery=e||this.query,this.loading=!0,d.a.searchBooks(this.query,this.currentPage*this.itemsPerPage).then(function(o){t.books=o.data.items,t.totalItems=o.data.totalItems,t.loading=!1}).catch(function(t){console.error("Error on searchBooks",t)})}},watch:{favorites:{handler:function(t){localStorage.setItem("rd-books-favs",a()(t))}}}}},function(t,o,e){"use strict";function s(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}Object.defineProperty(o,"__esModule",{value:!0});var a=e(6),n=e.n(a);o.default={name:"book",props:["book","favorites","searchedQuery"],methods:{openBookModal:function(){this.$emit("openBookModal",this.book.id)},toggleFavBook:function(){this.isFav?this.favorites.splice(n.a.findIndex(this.favorites,{id:this.book.id}),1):this.favorites.push(this.bookObj)},highlightSearch:function(t){if(t){var o=this.searchedQuery.trim().split(" ").map(function(t){return s(t)}).join("|");return t.replace(new RegExp(o,"ig"),function(t){return"<span class='highlight'>"+t+"</span>"})}return t}},computed:{bookObj:function(){return{id:this.book.id,title:this.book.volumeInfo.title}},bookAuthors:function(){return this.book.volumeInfo.authors?this.book.volumeInfo.authors.join(", "):""},isFav:function(){return!!n.a.find(this.favorites,{id:this.book.id})}}}},function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var s=e(13),a=e(6),n=e.n(a);o.default={name:"bookModal",props:["modalInfo"],data:function(){return{book:{}}},mounted:function(){var t=this;s.a.getBook(this.modalInfo.bookId).then(function(o){t.book=o.data}).catch(function(t){console.error("Error",t)})},methods:{closeModal:function(){this.modalInfo.bookId="",this.modalInfo.active=!1}},computed:{bookIsEmpty:function(){return n.a.isEmpty(this.book)},authors:function(){return this.book.volumeInfo.authors?this.book.volumeInfo.authors.join(", "):""}}}},function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var s=e(6),a=e.n(s);o.default={name:"favbar",props:["favorites"],data:function(){return{active:!1}},methods:{openBookModal:function(t){this.$emit("openBookModal",t)},removeFav:function(t){this.favorites.splice(a.a.findIndex(this.favorites,{id:t.id}),1)}}}},function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default={name:"loader"}},,,,,,,,,,,,,,,,,,function(t,o){},function(t,o){},function(t,o){},function(t,o){},function(t,o){},,,,function(t,o,e){e(62);var s=e(1)(e(41),e(74),null,null);t.exports=s.exports},function(t,o,e){e(65);var s=e(1)(e(42),e(77),null,null);t.exports=s.exports},function(t,o,e){e(63);var s=e(1)(e(43),e(75),"data-v-68f8a814",null);t.exports=s.exports},function(t,o,e){e(64);var s=e(1)(e(44),e(76),null,null);t.exports=s.exports},function(t,o){t.exports={render:function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"book"},[e("figure",{staticClass:"thumb"},[e("img",{attrs:{src:t.book.volumeInfo.imageLinks.smallThumbnail,alt:"Book Thumbnail"}})]),t._v(" "),e("div",{staticClass:"data"},[e("strong",{staticClass:"title",domProps:{innerHTML:t._s(t.highlightSearch(t.book.volumeInfo.title))}}),t._v(" "),e("span",{staticClass:"authors",domProps:{innerHTML:t._s(t.highlightSearch(t.bookAuthors))}}),t._v(" "),e("p",{staticClass:"description",domProps:{innerHTML:t._s(t.highlightSearch(t.book.volumeInfo.description))}}),t._v(" "),e("button",{staticClass:"fav",class:{active:t.isFav},attrs:{type:"button"},on:{click:function(o){t.toggleFavBook()}}},[t._v("★")])]),t._v(" "),e("a",{staticClass:"more-info",on:{click:function(o){t.openBookModal()}}},[t._v("More info")])])},staticRenderFns:[]}},function(t,o){t.exports={render:function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("nav",{staticClass:"fav-navbar",class:{active:t.active}},[e("button",{staticClass:"toggle",on:{click:function(o){t.active=!t.active}}},[t._v("★")]),t._v(" "),e("h3",{staticClass:"title"},[t._v("Favorites")]),t._v(" "),e("ul",{staticClass:"list"},t._l(t.favorites,function(o){return e("li",{staticClass:"item"},[e("a",{staticClass:"title",on:{click:function(e){t.openBookModal(o.id)}}},[t._v(t._s(o.title))]),t._v(" "),e("span",{staticClass:"remove",attrs:{title:"Un-favorite book"},on:{click:function(e){t.removeFav(o)}}},[t._v("×")])])}))])},staticRenderFns:[]}},function(t,o){t.exports={render:function(){var t=this,o=t.$createElement;return(t._self._c||o)("div",{staticClass:"loader"})},staticRenderFns:[]}},function(t,o){t.exports={render:function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"book-modal"},[t.bookIsEmpty?t._e():e("div",{staticClass:"modal"},[e("div",{staticClass:"top-info"},[e("figure",{staticClass:"thumb"},[e("img",{attrs:{src:t.book.volumeInfo.imageLinks.thumbnail,alt:"Book Thumb"}})]),t._v(" "),e("div",{staticClass:"main-info"},[e("h3",{staticClass:"title"},[t._v(t._s(t.book.volumeInfo.title))]),t._v(" "),e("span",{staticClass:"authors"},[t._v(t._s(t.authors))]),t._v(" "),e("span",{staticClass:"publisher"},[t._v("Published by "),e("strong",[t._v(t._s(t.book.volumeInfo.publisher))]),t._v(" in "),e("strong",[t._v(t._s(t.book.volumeInfo.publishedDate))])]),t._v(" "),e("span",{staticClass:"isbn"},[t._v("ISBN "+t._s(t.book.volumeInfo.industryIdentifiers[0].identifier))]),t._v(" "),e("span",{staticClass:"rating"},[t._v("Avarage Rating of "+t._s(t.book.volumeInfo.avarageRating)+" ("+t._s(t.book.volumeInfo.ratingsCount)+" votes)")])])]),t._v(" "),e("p",{staticClass:"description-label"},[t._v("Full description:")]),t._v(" "),e("p",{staticClass:"description",domProps:{innerHTML:t._s(t.book.volumeInfo.description)}})]),t._v(" "),e("div",{staticClass:"mask",on:{click:function(o){t.closeModal()}}})])},staticRenderFns:[]}},function(t,o){t.exports={render:function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("main",{staticClass:"main-content"},[e("section",{staticClass:"search-area"},[e("h1",{staticClass:"title"},[t._v("RD Books")]),t._v(" "),e("div",{staticClass:"search"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],staticClass:"search-bar",attrs:{type:"search",placeholder:"Search for books :)"},domProps:{value:t.query},on:{keypress:function(o){if(!("button"in o)&&t._k(o.keyCode,"enter",13))return null;t.getBooks()},input:function(o){o.target.composing||(t.query=o.target.value)}}}),t._v(" "),e("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(o){t.getBooks()}}},[t._v("Search")])]),t._v(" "),e("div",{staticClass:"books-index"},[t.loading?e("loader"):t._e(),t._v(" "),!t.loading&&t.searchedQuery&&t.booksIsEmpty?e("p",[t._v("No search results :(")]):t._e(),t._v(" "),t._l(t.books,function(o){return e("book",{key:o.id,attrs:{book:o,favorites:t.favorites,"searched-query":t.searchedQuery},on:{openBookModal:t.openBookModal}})}),t._v(" "),t.loading||!t.searchedQuery||t.booksIsEmpty?t._e():e("ul",{staticClass:"pagination"},[e("li",{staticClass:"page",class:{active:0===t.currentPage}},[e("button",{attrs:{disabled:0===t.currentPage},on:{click:function(o){t.getBooks(0,t.searchedQuery)}}},[t._v("1")])]),t._v(" "),t.currentPage>3?e("li",{staticClass:"page"},[t._v("...")]):t._e(),t._v(" "),t._l(t.totalPages,function(o){return Math.abs(o-t.currentPage)<3?e("li",{staticClass:"page",class:{active:t.currentPage===o}},[e("button",{attrs:{disabled:t.currentPage===o},on:{click:function(e){t.getBooks(o,t.searchedQuery)}}},[t._v(t._s(o+1))])]):t._e()}),t._v(" "),Math.abs(t.currentPage-t.totalPages)>4?e("li",{staticClass:"page"},[t._v("...")]):t._e(),t._v(" "),t.totalPages>4?e("li",{staticClass:"page",class:{active:t.currentPage===t.totalPages-1}},[e("button",{attrs:{disabled:t.currentPage===t.totalPages-1},on:{click:function(o){t.getBooks(t.totalPages-1,t.searchedQuery)}}},[t._v(t._s(t.totalPages-1))])]):t._e()],2)],2)]),t._v(" "),e("favbar",{attrs:{favorites:t.favorites},on:{openBookModal:t.openBookModal}}),t._v(" "),t.modalInfo.active?e("book-modal",{attrs:{"modal-info":t.modalInfo}}):t._e()],1)},staticRenderFns:[]}}],[39]);
//# sourceMappingURL=app.7636156e5529648301b4.js.map